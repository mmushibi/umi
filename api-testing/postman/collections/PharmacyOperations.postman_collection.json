{
	"info": {
		"_postman_id": "c3d4e5f6-a7b8-9012-cdef-345678901234",
		"name": "Umi Health - Pharmacy Operations Tests",
		"description": "Comprehensive test suite for pharmacy operations endpoints including product management, inventory updates, stock transfers, and supplier management.",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
	},
	"item": [
		{
			"name": "Product Management",
			"item": [
				{
					"name": "Create New Product",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 201\", function () {",
									"    pm.response.to.have.status(201);",
									"});",
									"",
									"pm.test(\"Response contains product data\", function () {",
									"    const jsonData = pm.response.json();",
									"    pm.expect(jsonData).to.have.property('id');",
									"    pm.expect(jsonData).to.have.property('name');",
									"    pm.expect(jsonData).to.have.property('code');",
									"    pm.expect(jsonData).to.have.property('category');",
									"    pm.expect(jsonData).to.have.property('manufacturer');",
									"    pm.expect(jsonData).to.have.property('unitPrice');",
									"});",
									"",
									"pm.test(\"Product has required properties\", function () {",
									"    const jsonData = pm.response.json();",
									"    pm.expect(jsonData).to.have.property('description');",
									"    pm.expect(jsonData).to.have.property('strength');",
									"    pm.expect(jsonData).to.have.property('form');",
									"    pm.expect(jsonData).to.have.property('requiresPrescription');",
									"    pm.expect(jsonData).to.have.property('isActive');",
									"});",
									"",
									"// Store product data for subsequent tests",
									"if (pm.response.code === 201) {",
									"    const jsonData = pm.response.json();",
									"    pm.environment.set(\"product_id\", jsonData.id);",
									"    pm.environment.set(\"product_code\", jsonData.code);",
									"    pm.environment.set(\"product_name\", jsonData.name);",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": "Bearer {{access_token}}"
							},
							{
								"key": "X-Tenant-Code",
								"value": "{{tenant_code}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"name\": \"{{product_name}}\",\n  \"code\": \"{{product_code}}\",\n  \"description\": \"Test medication for pain relief\",\n  \"category\": \"Analgesics\",\n  \"manufacturer\": \"Test Pharma Corp\",\n  \"strength\": \"500mg\",\n  \"form\": \"Tablet\",\n  \"unitPrice\": 15.99,\n  \"requiresPrescription\": true,\n  \"controlledSubstance\": false,\n  \"storageConditions\": {\n    \"temperature\": \"Room temperature\",\n    \"humidity\": \"Dry\",\n    \"light\": \"Protect from light\"\n  },\n  \"regulatoryInfo\": {\n    \"ndc\": \"12345-678-90\",\n    \"deaSchedule\": \"None\",\n    \"fdaApproved\": true\n  },\n  \"branchId\": \"{{branch_id}}\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/v1/pharmacy/products",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"v1",
								"pharmacy",
								"products"
							]
						}
					},
					"response": []
				},
				{
					"name": "Get Product Details",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"Response contains complete product data\", function () {",
									"    const jsonData = pm.response.json();",
									"    pm.expect(jsonData).to.have.property('id');",
									"    pm.expect(jsonData).to.have.property('name');",
									"    pm.expect(jsonData).to.have.property('code');",
									"    pm.expect(jsonData).to.have.property('inventory');",
									"    pm.expect(jsonData.inventory).to.have.property('currentStock');",
									"    pm.expect(jsonData.inventory).to.have.property('reorderLevel');",
									"});",
									"",
									"pm.test(\"Product matches created data\", function () {",
									"    const jsonData = pm.response.json();",
									"    pm.expect(jsonData.id).to.eql(pm.environment.get(\"product_id\"));",
									"    pm.expect(jsonData.code).to.eql(pm.environment.get(\"product_code\"));",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{access_token}}"
							},
							{
								"key": "X-Tenant-Code",
								"value": "{{tenant_code}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/v1/pharmacy/products/{{product_id}}",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"v1",
								"pharmacy",
								"products",
								"{{product_id}}"
							]
						}
					},
					"response": []
				},
				{
					"name": "Search Products",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"Response contains search results\", function () {",
									"    const jsonData = pm.response.json();",
									"    pm.expect(jsonData).to.have.property('items');",
									"    pm.expect(jsonData.items).to.be.an('array');",
									"    pm.expect(jsonData).to.have.property('totalCount');",
									"    pm.expect(jsonData).to.have.property('page');",
									"});",
									"",
									"pm.test(\"Search results are valid\", function () {",
									"    const jsonData = pm.response.json();",
									"    if (jsonData.items.length > 0) {",
									"        const product = jsonData.items[0];",
									"        pm.expect(product).to.have.property('id');",
									"        pm.expect(product).to.have.property('name');",
									"        pm.expect(product).to.have.property('code');",
									"    }",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{access_token}}"
							},
							{
								"key": "X-Tenant-Code",
								"value": "{{tenant_code}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/v1/pharmacy/products/search?q=Analgesic&category=Analgesics&page=1&pageSize=10",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"v1",
								"pharmacy",
								"products",
								"search"
							],
							"query": [
								{
									"key": "q",
									"value": "Analgesic"
								},
								{
									"key": "category",
									"value": "Analgesics"
								},
								{
									"key": "page",
									"value": "1"
								},
								{
									"key": "pageSize",
									"value": "10"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "Update Product",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"Response contains updated product data\", function () {",
									"    const jsonData = pm.response.json();",
									"    pm.expect(jsonData).to.have.property('id');",
									"    pm.expect(jsonData).to.have.property('name');",
									"    pm.expect(jsonData.name).to.include('Updated');",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "PUT",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": "Bearer {{access_token}}"
							},
							{
								"key": "X-Tenant-Code",
								"value": "{{tenant_code}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"name\": \"{{product_name}} - Updated\",\n  \"description\": \"Updated test medication for pain relief\",\n  \"unitPrice\": 17.99,\n  \"isActive\": true\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/v1/pharmacy/products/{{product_id}}",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"v1",
								"pharmacy",
								"products",
								"{{product_id}}"
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "Inventory Updates",
			"item": [
				{
					"name": "Get Inventory Status",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"Response contains inventory data\", function () {",
									"    const jsonData = pm.response.json();",
									"    pm.expect(jsonData).to.have.property('items');",
									"    pm.expect(jsonData.items).to.be.an('array');",
									"    pm.expect(jsonData).to.have.property('totalCount');",
									"});",
									"",
									"pm.test(\"Inventory items have required properties\", function () {",
									"    const jsonData = pm.response.json();",
									"    if (jsonData.items.length > 0) {",
									"        const item = jsonData.items[0];",
									"        pm.expect(item).to.have.property('productId');",
									"        pm.expect(item).to.have.property('productName');",
									"        pm.expect(item).to.have.property('currentStock');",
									"        pm.expect(item).to.have.property('reorderLevel');",
									"        pm.expect(item).to.have.property('status');",
									"    }",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{access_token}}"
							},
							{
								"key": "X-Tenant-Code",
								"value": "{{tenant_code}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/v1/pharmacy/inventory?branchId={{branch_id}}&status=low_stock",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"v1",
								"pharmacy",
								"inventory"
							],
							"query": [
								{
									"key": "branchId",
									"value": "{{branch_id}}"
								},
								{
									"key": "status",
									"value": "low_stock"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "Update Stock Level",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"Response contains updated inventory data\", function () {",
									"    const jsonData = pm.response.json();",
									"    pm.expect(jsonData).to.have.property('productId');",
									"    pm.expect(jsonData).to.have.property('previousStock');",
									"    pm.expect(jsonData).to.have.property('newStock');",
									"    pm.expect(jsonData).to.have.property('adjustmentType');",
									"});",
									"",
									"pm.test(\"Stock adjustment is recorded correctly\", function () {",
									"    const jsonData = pm.response.json();",
									"    pm.expect(jsonData.productId).to.eql(pm.environment.get(\"product_id\"));",
									"    pm.expect(jsonData.adjustmentType).to.eql('receive');",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": "Bearer {{access_token}}"
							},
							{
								"key": "X-Tenant-Code",
								"value": "{{tenant_code}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"productId\": \"{{product_id}}\",\n  \"adjustmentType\": \"receive\",\n  \"quantity\": 100,\n  \"reason\": \"New stock received from supplier\",\n  \"batchNumber\": \"BATCH001\",\n  \"expiryDate\": \"2025-12-31\",\n  \"costPerUnit\": 12.50,\n  \"branchId\": \"{{branch_id}}\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/v1/pharmacy/inventory/adjust",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"v1",
								"pharmacy",
								"inventory",
								"adjust"
							]
						}
					},
					"response": []
				},
				{
					"name": "Get Low Stock Alerts",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"Response contains low stock alerts\", function () {",
									"    const jsonData = pm.response.json();",
									"    pm.expect(jsonData).to.have.property('alerts');",
									"    pm.expect(jsonData.alerts).to.be.an('array');",
									"});",
									"",
									"pm.test(\"Alerts have required properties\", function () {",
									"    const jsonData = pm.response.json();",
									"    if (jsonData.alerts.length > 0) {",
									"        const alert = jsonData.alerts[0];",
									"        pm.expect(alert).to.have.property('productId');",
									"        pm.expect(alert).to.have.property('productName');",
									"        pm.expect(alert).to.have.property('currentStock');",
									"        pm.expect(alert).to.have.property('reorderLevel');",
									"        pm.expect(alert).to.have.property('urgency');",
									"    }",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{access_token}}"
							},
							{
								"key": "X-Tenant-Code",
								"value": "{{tenant_code}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/v1/pharmacy/inventory/alerts/low-stock?branchId={{branch_id}}",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"v1",
								"pharmacy",
								"inventory",
								"alerts",
								"low-stock"
							],
							"query": [
								{
									"key": "branchId",
									"value": "{{branch_id}}"
								}
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "Stock Transfers",
			"item": [
				{
					"name": "Create Stock Transfer",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 201\", function () {",
									"    pm.response.to.have.status(201);",
									"});",
									"",
									"pm.test(\"Response contains transfer data\", function () {",
									"    const jsonData = pm.response.json();",
									"    pm.expect(jsonData).to.have.property('id');",
									"    pm.expect(jsonData).to.have.property('fromBranchId');",
									"    pm.expect(jsonData).to.have.property('toBranchId');",
									"    pm.expect(jsonData).to.have.property('status');",
									"    pm.expect(jsonData.status).to.eql('pending');",
									"});",
									"",
									"pm.test(\"Transfer has required items\", function () {",
									"    const jsonData = pm.response.json();",
									"    pm.expect(jsonData).to.have.property('items');",
									"    pm.expect(jsonData.items).to.be.an('array');",
									"    if (jsonData.items.length > 0) {",
									"        pm.expect(jsonData.items[0]).to.have.property('productId');",
									"        pm.expect(jsonData.items[0]).to.have.property('quantity');",
									"    }",
									"});",
									"",
									"// Store transfer data for subsequent tests",
									"if (pm.response.code === 201) {",
									"    const jsonData = pm.response.json();",
									"    pm.environment.set(\"transfer_id\", jsonData.id);",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": "Bearer {{access_token}}"
							},
							{
								"key": "X-Tenant-Code",
								"value": "{{tenant_code}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"fromBranchId\": \"{{branch_id}}\",\n  \"toBranchId\": \"{{target_branch_id}}\",\n  \"reason\": \"Stock redistribution between branches\",\n  \"requestedBy\": \"{{user_id}}\",\n  \"items\": [\n    {\n      \"productId\": \"{{product_id}}\",\n      \"quantity\": 25,\n      \"batchNumber\": \"BATCH001\"\n    }\n  ],\n  \"priority\": \"normal\",\n  \"expectedDeliveryDate\": \"2024-12-25\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/v1/pharmacy/transfers",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"v1",
								"pharmacy",
								"transfers"
							]
						}
					},
					"response": []
				},
				{
					"name": "Get Transfer Details",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"Response contains complete transfer data\", function () {",
									"    const jsonData = pm.response.json();",
									"    pm.expect(jsonData).to.have.property('id');",
									"    pm.expect(jsonData).to.have.property('status');",
									"    pm.expect(jsonData).to.have.property('tracking');",
									"    pm.expect(jsonData).to.have.property('history');",
									"});",
									"",
									"pm.test(\"Transfer matches created data\", function () {",
									"    const jsonData = pm.response.json();",
									"    pm.expect(jsonData.id).to.eql(pm.environment.get(\"transfer_id\"));",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{access_token}}"
							},
							{
								"key": "X-Tenant-Code",
								"value": "{{tenant_code}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/v1/pharmacy/transfers/{{transfer_id}}",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"v1",
								"pharmacy",
								"transfers",
								"{{transfer_id}}"
							]
						}
					},
					"response": []
				},
				{
					"name": "Approve Transfer",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"Response contains approved transfer data\", function () {",
									"    const jsonData = pm.response.json();",
									"    pm.expect(jsonData).to.have.property('id');",
									"    pm.expect(jsonData).to.have.property('status');",
									"    pm.expect(jsonData.status).to.eql('approved');",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": "Bearer {{access_token}}"
							},
							{
								"key": "X-Tenant-Code",
								"value": "{{tenant_code}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"action\": \"approve\",\n  \"notes\": \"Transfer approved for redistribution\",\n  \"approvedBy\": \"{{user_id}}\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/v1/pharmacy/transfers/{{transfer_id}}/approve",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"v1",
								"pharmacy",
								"transfers",
								"{{transfer_id}}",
								"approve"
							]
						}
					},
					"response": []
				},
				{
					"name": "Complete Transfer",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"Response contains completed transfer data\", function () {",
									"    const jsonData = pm.response.json();",
									"    pm.expect(jsonData).to.have.property('id');",
									"    pm.expect(jsonData).to.have.property('status');",
									"    pm.expect(jsonData.status).to.eql('completed');",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": "Bearer {{access_token}}"
							},
							{
								"key": "X-Tenant-Code",
								"value": "{{tenant_code}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"action\": \"complete\",\n  \"notes\": \"Transfer completed successfully\",\n  \"receivedBy\": \"{{user_id}}\",\n  \"receivedItems\": [\n    {\n      \"productId\": \"{{product_id}}\",\n      \"quantityReceived\": 25,\n      \"condition\": \"good\"\n    }\n  ]\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/v1/pharmacy/transfers/{{transfer_id}}/complete",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"v1",
								"pharmacy",
								"transfers",
								"{{transfer_id}}",
								"complete"
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "Supplier Management",
			"item": [
				{
					"name": "Create Supplier",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 201\", function () {",
									"    pm.response.to.have.status(201);",
									"});",
									"",
									"pm.test(\"Response contains supplier data\", function () {",
									"    const jsonData = pm.response.json();",
									"    pm.expect(jsonData).to.have.property('id');",
									"    pm.expect(jsonData).to.have.property('name');",
									"    pm.expect(jsonData).to.have.property('code');",
									"    pm.expect(jsonData).to.have.property('contactInfo');",
									"    pm.expect(jsonData).to.have.property('status');",
									"    pm.expect(jsonData.status).to.eql('active');",
									"});",
									"",
									"// Store supplier data for subsequent tests",
									"if (pm.response.code === 201) {",
									"    const jsonData = pm.response.json();",
									"    pm.environment.set(\"supplier_id\", jsonData.id);",
									"    pm.environment.set(\"supplier_code\", jsonData.code);",
									"    pm.environment.set(\"supplier_name\", jsonData.name);",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": "Bearer {{access_token}}"
							},
							{
								"key": "X-Tenant-Code",
								"value": "{{tenant_code}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"name\": \"{{supplier_name}}\",\n  \"code\": \"{{supplier_code}}\",\n  \"description\": \"Primary pharmaceutical supplier\",\n  \"contactInfo\": {\n    \"primaryContact\": \"John Smith\",\n    \"email\": \"orders@{{supplier_code}}.com\",\n    \"phone\": \"+1234567890\",\n    \"address\": {\n      \"street\": \"789 Supplier Lane\",\n      \"city\": \"Supplier City\",\n      \"state\": \"Supplier State\",\n      \"country\": \"Supplier Country\",\n      \"postalCode\": \"54321\"\n    }\n  },\n  \"paymentTerms\": {\n    \"netDays\": 30,\n    \"currency\": \"USD\",\n    \"discountTerms\": {\n      \"percentage\": 2,\n      \"days\": 10\n    }\n  },\n  \"deliveryInfo\": {\n    \"leadTimeDays\": 3,\n    \"minimumOrder\": 100,\n    \"shippingMethods\": [\"standard\", \"express\"]\n  },\n  \"categories\": [\"Analgesics\", \"Antibiotics\", \"Vitamins\"],\n  \"branchId\": \"{{branch_id}}\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/v1/pharmacy/suppliers",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"v1",
								"pharmacy",
								"suppliers"
							]
						}
					},
					"response": []
				},
				{
					"name": "Get Supplier Details",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"Response contains complete supplier data\", function () {",
									"    const jsonData = pm.response.json();",
									"    pm.expect(jsonData).to.have.property('id');",
									"    pm.expect(jsonData).to.have.property('name');",
									"    pm.expect(jsonData).to.have.property('contactInfo');",
									"    pm.expect(jsonData).to.have.property('paymentTerms');",
									"    pm.expect(jsonData).to.have.property('deliveryInfo');",
									"});",
									"",
									"pm.test(\"Supplier matches created data\", function () {",
									"    const jsonData = pm.response.json();",
									"    pm.expect(jsonData.id).to.eql(pm.environment.get(\"supplier_id\"));",
									"    pm.expect(jsonData.code).to.eql(pm.environment.get(\"supplier_code\"));",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{access_token}}"
							},
							{
								"key": "X-Tenant-Code",
								"value": "{{tenant_code}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/v1/pharmacy/suppliers/{{supplier_id}}",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"v1",
								"pharmacy",
								"suppliers",
								"{{supplier_id}}"
							]
						}
					},
					"response": []
				},
				{
					"name": "List All Suppliers",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"Response contains supplier list\", function () {",
									"    const jsonData = pm.response.json();",
									"    pm.expect(jsonData).to.have.property('items');",
									"    pm.expect(jsonData.items).to.be.an('array');",
									"    pm.expect(jsonData).to.have.property('totalCount');",
									"});",
									"",
									"pm.test(\"Supplier data structure is valid\", function () {",
									"    const jsonData = pm.response.json();",
									"    if (jsonData.items.length > 0) {",
									"        const supplier = jsonData.items[0];",
									"        pm.expect(supplier).to.have.property('id');",
									"        pm.expect(supplier).to.have.property('name');",
									"        pm.expect(supplier).to.have.property('code');",
									"        pm.expect(supplier).to.have.property('status');",
									"    }",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{access_token}}"
							},
							{
								"key": "X-Tenant-Code",
								"value": "{{tenant_code}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/v1/pharmacy/suppliers?branchId={{branch_id}}&status=active",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"v1",
								"pharmacy",
								"suppliers"
							],
							"query": [
								{
									"key": "branchId",
									"value": "{{branch_id}}"
								},
								{
									"key": "status",
									"value": "active"
								}
							]
						}
					},
					"response": []
				}
			]
		}
	],
	"event": [
		{
			"listen": "prerequest",
			"script": {
				"type": "text/javascript",
				"exec": [
					"// Generate unique test data if not set",
					"if (!pm.environment.get(\"product_name\")) {",
					"    const timestamp = Date.now();",
					"    pm.environment.set(\"product_name\", `Test Product ${timestamp}`);",
					"    pm.environment.set(\"product_code\", `PROD${timestamp}`);",
					"    pm.environment.set(\"supplier_name\", `Test Supplier ${timestamp}`);",
					"    pm.environment.set(\"supplier_code\", `SUPP${timestamp}`);",
					"}",
					"",
					"// Set target branch for transfers (different from source)",
					"if (!pm.environment.get(\"target_branch_id\")) {",
					"    pm.environment.set(\"target_branch_id\", \"target-branch-123\");",
					"}"
				]
			}
		},
		{
			"listen": "test",
			"script": {
				"type": "text/javascript",
				"exec": [
					"// Global test for response time",
					"pm.test(\"Response time is less than 2000ms\", function () {",
					"    pm.expect(pm.response.responseTime).to.be.below(2000);",
					"});",
					"",
					"// Global test for content type",
					"pm.test(\"Response has JSON content type\", function () {",
					"    pm.expect(pm.response.headers.get(\"Content-Type\")).to.include(\"application/json\");",
					"});"
				]
			}
		}
	]
}
